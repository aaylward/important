This is copied from Hakan Ensari at https://coderwall.com/p/63nzva because it's too important to lose.

====

Note to future self:

 - Remap Caps Lock to Control in the Keyboard preference pane.
 - In KeyRemap4MacBook, check Control L to Control L (+ When you type Control L only, send Escape).
 - Now, hitting Caps Lock alone will escape while holding it down and hitting another key will act as Control.

